# 1、缓存雪崩

缓存雪崩，当redis突然不可用，或者大量的Key在同一时间失效，比如5000条请求同一时间全部落库数据库，数据库就会扛不住压力而崩溃。

解决方法：

事前：保证redis集群的高可用，主从+哨兵，redis cluster，避免全盘崩溃

事中：利用ehcache本地缓存，hystrix限流+降级

事后：redis持久化，快速恢复缓存数据



# 2、缓存穿透

缓存穿透是指，缓存和数据库都没有的数据，被大量请求，所有的数据都直接请求到数据库。如果被恶意用户利用，就会导致数据库崩溃

解决方法：

1：做业务数据过滤，进行合法性校验，可以拦截大部分不合法的请求

2：对空的数据进行缓存，但是过期时间尽量短，一般5分钟以内

3：布隆过滤器



# 3、缓存击穿

缓存击穿指的数据库中有，但是缓存中没有的数据，如果是热点数据，突然很多请求过来，缓存中没有，则会去请求数据库，引发数据库压力过大，瞬间垮掉

解决方法：

1、如果是热点数据可以设置永不过期

2、如果数据一定会过期，就需要在数据为空的时候设置一个互斥锁，只让一个请求通过，通过以后，不管数据时候写入成功，都要释放锁，异常也要释放锁，不然其他线程会获取不到锁。

