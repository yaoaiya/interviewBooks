### 1 自我介绍

远程面试，视频接通后，面试官可能会简单介绍下自己，然后就直接让你做一个自我介绍，这个没有例外。

我一开始心里想这不都是简历上写着的么？后来感觉可能是考察你的表达能力吧。这个时候说说姓名、学校、专业、毕业时间、工作经历、主要项目、技术栈，应该就差不多了。



你好， 我叫姚延保，本科专业是电子信息工程，工作经验差不多有5年了。18年入职武汉中软国际，做华为的项目，其中最大的一个项目是ifollow远程作战平台，用来监控一线运维人员操作是否合规。其中有涉及到的技术功能有用到定时任务统计告警信息、**图片和视频的加解密存储**、通过poi对excel进行html的转换，生成报表邮件的发送等。19年年底离职，入职上家公司慧联无限科技，是专注物联网领域的，做自己的paas/**saas平台**，数据量最大的一张表数据量是百万级别，后来迁移到了es。我主要做的paas端的业务，技术栈有涉及到ssm、mysql、redis、分布式锁、elasticsearch等。收货的话，Auth2.0认证，分布式锁，mysql优化



#### 1.1 工作经历

通常说到工作经历的时候，会问你：

- 毕业第一份工作为什么选择了那里？
- 为什么看机会？上次换工作为什么？
- 有了解过我们部门做什么的么？感兴趣么？
- 工作这些年，主要的收获是什么？

最好别老抱怨之前的公司，可以说说自己的规划之类的。



#### 1.2 项目经历

说到项目经历的时候，有些面试官会从你说的当中跳他感兴趣的问你，所以自我介绍的时候可以有倾向性的说说你比较拿手的项目。



#### 1.3 未来规划

我在被问到这个问题的时候通常是一头懵逼，因为我之前没有好好想过，大家可以准备一下。

- 未来的规划（城市）
- 技术上的追求
- 长期方向（行业）



#### 1.4 日常行为

- 平时有看什么技术相关的书，博客？
- 最近有在学习什么新技术么？**讲讲 kafka**

**kafka是什么**

> kafka是一种MQ的消息队列，通过发布/订阅模型可以实现系统的解耦

**kafka的优缺点**：

> 解耦、异步、削峰；系统可用性降低、程序复杂度提高、数据一致性问题

**如何保证数据不丢失**

> kafka数据丢失的原因：leader将数据复制到fllower的过程中，发生宕机，fllower转变成leader的过程，发生数据丢失。
>
> 解决方法：设置4个参数

**如何保证数据不重复消费**

> 为什么会有重复数据呢？
>
> kafka实际上有个offset的概念，就是每个消息写进去，都有一个offset，代表他的序号，然后consumer消费了数据之后，每隔一段时间，会把自己消费过的消息的offset提交一下，代表我已经消费过了，下次我要是重启啥的，你就让我继续从上次消费到的offset来继续消费吧。
>
> 解决：如果是数据库存储，就做唯一标识的唯一性校验；如果是redis，那么set数据类型，是天然的幂等性；还可以根据数据库的主键唯一性约束

如何保证数据有序性

- 怎么对待 995 的情况？
- 怎么处理同事不配合的情况？



### 2 最有挑战的项目

自我介绍之后，如果面试官没有从你说的项目里主动问你，一般就会让你自己选一个项目说。

通常问法是：

遇到的最难的项目？难在哪里？怎么解决的？得到了什么收获？

- 基于Auth2.0对api接口的认证和授权

- 自定义门户，给客户自定义域名时的即时生效（基于池化思想）



社招项目问得是比较细的，事前好好准备一下吧，不要说到自己做的项目，因为时间比较久了，有些细节都忘了。面试前将自己做过的项目再熟悉熟悉。



### 3 基础知识

基础知识这块是跟你简历上提到的技术栈相关的，每个人不一定相同，但 Redis 和 Kafka 都是没有被错过的。这一块就是考察你掌握是深度了，不一定全都要了解到底层，每家要求不一样。



#### 3.1 Java

##### 1）基础

- int float short double long char 占字节数？
- int 范围？float 范围？int 2^31-1
- hashcode 和 equals 的关系

> Object类的equals方法是用“==”号进行比较，在很多时候，因为==号比较的是两个对象的内存地址而不是实际的值，所以不是很符合业务要求。所以很多时候我们需要重写equals方法，去比较对象中每一个成员变量的值是否相等。
>
> 因为Hash比equals方法的开销要小，速度更快，所以在涉及到hashcode的容器中（比如HashSet），判断自己是否持有该对象时，会先检查hashCode是否相等，如果hashCode不相等，就会直接认为不相等，并存入容器中，不会再调用equals进行比较。
>
> 这样就会导致，即使该对象已经存在HashSet中，但是因为hashCode不同，还会再次被存入。
>
> 因此要重写hashCode保证：如果equals判断是相等的，那hashCode值也要相等

- 深拷贝、浅拷贝区别
- java 异常体系？RuntimeException Exception Error 的区别，举常见的例子
- lambda 表达式中使用外部变量，为什么要 final？

> 这是java为了防止数据不同步而规定的，也就是防止你在lambda内使用的外层局部变量被外层代码修改了，但是lambda内部无法同步这个修改

##### 2）集合

集合这块关注一下 1.8 的实现吧，和 1.7 相比变化了很多

- Collection 有什么子接口、有哪些具体的实现
- 简单介绍下 ArrayList 怎么实现，加操作、取值操作，什么时候扩容？
- 讲一下 hashMap 原理。hashMap 可以并发读么？并发写会有什么问题？
- 讲一下 concurrentHashMap 原理。头插法还是尾插法？扩容怎么做？
- 堆是怎么存储的，插入是在哪里？
- 集合在迭代的过程中，插入或删除数据会怎样？

##### 3）并发

- 线程
  - 进程和线程的区别？并行和并发的区别？了解协程么？
  - 进程间如何通信：进程 A 想读取进程 B 的主存怎么办？线程间通信？
  - 线程的生命周期有哪些状态？怎么转换？
  - wait 和 sleep 有什么区别？什么情况下会用到 sleep？
  - 怎么停止线程？
  - 怎么控制多个线程按序执行？
- 线程池
  - 会用到线程池么？怎么使用的？用什么实现的？
  - 常用的线程池有哪些？用的哪个线程池？什么情况下怎么选择？
  - ThreadPoolExecutor 有什么参数？各有什么作用？拒绝策略?
  - 一个任务从被提交到被执行，线程池做了哪些工作？
- 锁
  - 讲一下锁，有哪些锁，有什么区别，怎么实现的？
  - ReentrantLock 应用场景
  - 死锁条件
- AQS
  - 了解 AQS 么？讲讲底层实现原理
  - AQS 有那些实现？
  - 讲讲 AtomicInteger 的底层实现
- volatile 关键字有什么用？怎么理解可见性，一般什么场景去用可见性
- 讲一下 threadLocal 原理，threadLocal 是存在 jvm 内存哪一块的

##### 4）IO

IO 这块我不熟，没有多讲

- 了解 NIO 么？讲讲
- NIO 与 BIO 有什么区别？
- 了解 Netty 原理么



#### 3.2 JVM

##### 1）内存与 GC

- jvm 内存区域分布？gc 发生在哪些部分？
- 介绍一下垃圾回收过程。
- 垃圾回收算法的了解。现在用的什么回收算法？
- 现在使用的什么垃圾回收器？知道哪些？讲讲 G1
- 容器的内存和 jvm 的内存有什么关系？参数怎么配置？

##### 2）异常与调优

- 线上有什么 jvm 参数调整？
- oom 问题排查思路
- 线上问题排查，突然长时间未响应，怎么排查，oom
- cpu 使用率特别高，怎么排查？通用方法？定位代码？cpu高的原因？
- 频繁 GC 原因？什么时候触发 FGC？
- 怎么获取 dump 文件？怎么分析？

##### 3）类加载器

- 怎么实现自己的类加载器？
- 类加载过程？
- 初始化顺序？



#### 3.3 Spring

- spring 介绍一下
- 讲一下 ioc、aop
- ioc 怎么防止循环依赖
- aop 的实现原理、动态代理过程
- tomcat 与 spring、controller 的关系
- spring boot starter 自加载是怎么实现的？在生命周期哪个阶段？
- Spring 处理请求的过程？



#### 3.4 MySQL

- 数据仓库与 mysql 区别？hive 和 mysql 有什么区别？spark 和 hadoop 区别？mapreduce 互相等待，怎么解决？

- acid 含义？事务隔离级别？幻读怎么解决的？

- 用过 mysql 的锁么？有哪些锁？

- MyISAM、InnoDB 区别？为什么不用 MyISAM？

- mvcc 原理？多版本数据存放在哪？

- mysql 脏页？

- redo log，undo log？

- 索引

  - innodb 的索引结构是什么？什么是聚簇索引？
  - b+ 树与 b 树的区别？
  - b+ 树与二叉树区别，优点？为什么不用红黑树？
  - 多列索引的结构
  - 字符串类型和数字类型索引的效率？数据类型隐式转换
  - 主键与普通索引的联系？存储上的区别？

- sql

  - join 和 in 怎么选择？有什么区别？
  - union 和 union all 有什么区别？怎么选择？
  - 怎么处理 sql 慢查询？
  - 索引用得不太正常怎么处理？同时有（a，b）和（a，c）的索引，查询 a 的时候，会选哪个索引？
  - 索引失效的原因

  > 最左前缀原则
  >
  > 实用like不当
  >
  > 在查询条件中做函数操作或者范围查询

- 跨库分页的实现？

- 分库分表有哪些策略？怎么保证 id 唯一？

- 对 uuid 的理解？知道哪些 GUID、Random 算法？

- 主键选随机 id、uuid 还是自增 id？为什么？主键有序无序对数据库的影响？

- 主从复制的过程？复制原理？怎么保证强一致性？



#### 3.5 网络

- tcp
  - tcp 有哪些机制确保可靠性？拥塞控制怎么实现？
  - close_wait 太多怎么处理？为什么会出现这种情况？
  - 讲讲三次握手，四次挥手
- http
  - http 2 有了解过么，新增了哪些功能，现在用的什么版本？1.1？
  - http 缓存机制都有哪些？什么是 cdn？header 中涉及到缓存的字段有哪些？
  - cookie session 介绍一下
  - html 页面，怎么与后端交互？流程是什么？涉及到哪些组件？
  - http 协议，报文格式？
  - keepalive 有什么用？
  - Https 原理？
  - 知道哪些 http 状态码有哪些？
  - http 有哪些请求方法？put、post 实现上有什么区别？
- 前后端分离与不分离的区别？各有什么优缺点？
- 常见 web 攻击有哪些？了解 csrf 攻击么？
- restful 的作用？有哪些优点和缺点？
- nginx 达到上限了怎么办？怎么对 nginx 负载均衡？dns？
- nginx 负载均衡有哪些算法？各自有什么优缺点？



#### 3.6 Redis

- Redis 数据结构、对象，使用场景
- Redis 内存淘汰策略
- 缓存的热点 Key 怎么处理？redis 缓存穿透，怎么避免？
- redis keys 命令有什么缺点
- 主从同步原理，新加从库的过程
- RDB 和 AOF 怎么选择，什么场景使用？
- redis 的 zset 的使用场景？底层实现？为什么要用跳表？
- 怎么实现 redis 分布式锁？



#### 3.7 Kafka

- 用 kafka 做了什么功能？
- kafka 内部原理？工作流程？
- Kafka 怎么保证数据可靠性？
- 怎么实现 Exactly-Once？



#### 3.8 分布式

- 有哪些分布式组件是你最熟悉的，简单聊一聊。
- cap 是指什么？mysql 满足 cap 中哪些？
- 分布式锁有哪些方式可以实现？各有什么优缺点？
- 什么是一致性 hash？自己实现一致性 hash，会用什么数据结构？



#### 3.9 微服务

- 微服务用的什么体系？
- 讲一下熔断概念？熔断原理？令牌桶？熔断三个状态关系？
- 熔断会影响性能么？有遇到过线上发生熔断么？不加会怎样？
- 什么是 RPC？怎么实现幂等性？
- 微服务有什么优缺点？
- 配置中心有哪些选项？apollo 的架构？怎么无感实现已加载数据更新？



#### 3.10 设计模式

- 工厂方法和抽象工厂的区别
- 装饰器和代理区别
- 单例
  - 对于单例，你知道哪些实现方法？
  - 实现一个懒加载单例
  - 双重校验锁为什么需要双重校验？



### 4 算法题

基本都会问时间复杂度

- 有哪些常用排序算法？
- 手写快排，快排时间复杂度是多少？
- 快排算法是不是稳定的？什么是稳定性？
- 给定一个字母组成的字符串，找出不含有重复字符的最长子串的长度。
- 9 个硬币中有一个劣币，用天平秤，最坏几次？
- 深度优先，广度优先
- 数字转中文
- 括号匹配，时间复杂度，空间复杂度
- 单向链表的归并排序
- 链表做加法
- 1g 大小文件，里面每行是最大 16k 的单词，限制内存 1m，统计单词频率最多的 100 个单词
- 手写 100 位带小数的大数字的减法
- 全排列。进阶：给数组长度 n，求第 k 行的排列
- 买卖股票



### 5 系统设计

- 一天爬一千万条文章，怎么做设计？怎么并行协调？100 台服务器怎么尽可能负载均衡？
- 怎么设计一个秒杀系统？怎么解决大并发？
- 设计一个抢红包系统，要注意哪些点
- 设计一个微博社交系统，怎么更高效，索引怎么设计、提高效率，查询扫描行数，缓存设计
- 在 java 里手动实现一个生产者、消费者模型
- 设计一个视频上传的流程。表设计？文件上传服务器的原理？cdn？高qps怎么处理？上传和请求？缓存怎么加？
- 有什么分布式 id 生成方法？各自的优缺点是什么？
- 反羊毛怎么做？
- 设计一个简单的智能家具系统，比如说加湿器和温湿度传感器关联，怎么设计？考虑哪些点？
- 设计一个登陆过程。md5 的原理？可逆么？
- 设计一个即时通讯系统



### 6 你有什么想问的？

- 部门定位？岗位职责？
- 目前在做什么业务？
- 加班情况？
- 薪酬福利介绍？



### 7 Offer 选择

- 目前手头的 offer 情况？
- 还有哪些公司的面试流程？
- 这些公司你自己有什么倾向性呢？最看重什么因素？
- 你的预期薪酬是多少？目前的薪资情况？
- 想加入一个怎么样的团队？